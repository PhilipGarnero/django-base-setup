server {
       server_name www.base.com;

       access_log /var/log/nginx/base.access.log;
       error_log /var/log/nginx/base.error.log;

       root /home/user/base;

       listen 443;
       ssl on;
       ssl_certificate /etc/nginx/ssl/base.crt;
       ssl_certificate_key /etc/nginx/ssl/base.key;
       ssl_prefer_server_ciphers       on;

       location /static {
           alias /home/user/base/public/static;
       }

       location /media {
           alias /home/user/base/base/uimedia/public;
       }

       location /protected {
           internal;
           root /home/user/base/base/uimedia/protected;
       }

       location / {
           proxy_pass http://127.0.0.1:8000;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header Host $host;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_set_header X-Forwarded-Protocol ssl;
       }
}